.mobile-menu.dropdown-menu {
  max-width: calc(100vw - 2rem);
  min-width: 20rem;
}

@media (max-width: 480px) {
  .mobile-menu.dropdown-menu {
    min-width: 18rem;
    max-width: calc(100vw - 1rem);
  }
}

.dropdown-menu {
  min-width: 10rem;
  max-height: 20rem;
  overflow-y: auto;
}

.search-result-selected {
  background-color: color-mix(
    in srgb,
    var(--color-primary) 10%,
    transparent
  ) !important;
  color: var(--color-primary) !important;
}

/* Scrollbar hide utility */
.scrollbar-hide {
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}


.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.reading-progress-container {
  height: var(--reading-progress-height);
}

.reading-progress-bg {
  height: var(--reading-progress-height);
  background-color: var(--reading-progress-bg);
}

.reading-progress-bar {
  height: var(--reading-progress-height);
  box-shadow: 0 0 8px var(--reading-progress-shadow);
}



@media (max-width: 480px) {
  #dock span {
    display: none;
  }
}

/* 悬浮模式下的 Dock 样式 */
#dock[data-dock-mode="float"] {
  transition: all 0.2s ease-out;
}

/* 当dock显示时，调整阴影遮罩 */
#dock[data-dock-mode="float"].translate-y-0 ~ #dock-float-trigger .bg-gradient-to-t {
  height: 12px;
}

/* 当dock显示时，图标旋转 */
#dock[data-dock-mode="float"].translate-y-0 ~ #dock-float-trigger #dock-float-icon {
  transform: rotate(180deg);
  transition: transform 0.2s ease-out;
}

/* 响应式优化 */
@media (max-width: 640px) {
  #dock[data-dock-mode="float"] {
    left: 1rem;
    right: 1rem;
    transform: translateX(0) translateY(24px);
  }
  
  #dock[data-dock-mode="float"].translate-y-0 {
    transform: translateX(0) translateY(0);
  }
  
  #dock[data-dock-mode="float"].translate-y-24 {
    transform: translateX(0) translateY(24px);
  }
}
  
/* TOC 卡片样式 */
#toc-content nav {
  @apply text-sm leading-6;
}

#toc-content ul {
  @apply m-0 list-none p-0;
}

#toc-content li {
  @apply my-1 p-0;
}

/* TOC 侧边栏样式 */
.toc-sidebar {
  width: 280px;
  z-index: 30;
  top: 6rem; /* 默认位置 24px = 6rem */
}

/* 左侧定位 - 计算公式：(100vw - 896px) / 2 - 280px - 32px */
/* 896px = max-w-4xl, 280px = TOC宽度, 32px = 间距 */
.toc-sidebar-left {
  left: max(1rem, calc((100vw - 896px) / 2 - 280px - 2rem));
}

/* 右侧定位 - 计算公式：(100vw - 896px) / 2 - 280px - 32px */
.toc-sidebar-right {
  right: max(1rem, calc((100vw - 896px) / 2 - 280px - 2rem));
}

/* Series 侧边栏样式 */
.series-sidebar {
  width: 280px;
  z-index: 30;
}

/* Series 左侧定位 - 计算公式：(100vw - 896px) / 2 - 280px - 32px */
.series-sidebar-left {
  left: max(1rem, calc((100vw - 896px) / 2 - 280px - 2rem));
}

/* Series 右侧定位 - 计算公式：(100vw - 896px) / 2 - 280px - 32px */
.series-sidebar-right {
  right: max(1rem, calc((100vw - 896px) / 2 - 280px - 2rem));
}

/* Series 侧边栏滚动条样式 */
.series-sidebar-scroll {
  scrollbar-width: thin;
  scrollbar-color: color-mix(in srgb, var(--color-muted-foreground) 30%, transparent) transparent;
}

.series-sidebar-scroll::-webkit-scrollbar {
  width: 6px;
}

.series-sidebar-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.series-sidebar-scroll::-webkit-scrollbar-thumb {
  background-color: color-mix(in srgb, var(--color-muted-foreground) 30%, transparent);
  border-radius: 3px;
}

.series-sidebar-scroll::-webkit-scrollbar-thumb:hover {
  background-color: color-mix(in srgb, var(--color-muted-foreground) 50%, transparent);
}

/* Series 侧边栏动画 */
.series-sidebar {
  animation: series-sidebar-fade-in 0.3s ease-out;
}

@keyframes series-sidebar-fade-in {
  from {
    opacity: 0;
    transform: translateX(-10px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.series-sidebar.series-sidebar-right {
  animation-name: series-sidebar-fade-in-right;
}

@keyframes series-sidebar-fade-in-right {
  from {
    opacity: 0;
    transform: translateX(10px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

#toc-sidebar-content {
  @apply text-sm leading-6;
}

#toc-sidebar-content ul {
  @apply m-0 list-none p-0;
}

#toc-sidebar-content li {
  @apply my-1 p-0;
}

#toc-sidebar-content a {
  @apply block py-1.5 px-2 rounded-md text-muted-foreground transition-colors duration-200;
  @apply hover:text-primary hover:bg-primary/10;
}

#toc-sidebar-content li.active > a {
  @apply text-primary bg-primary/10 translate-x-0.5 -translate-y-px scale-[1.02] font-medium;
}

#toc-sidebar-content ul ul {
  @apply ml-3 mt-1;
}

/* 侧边栏滚动条样式 */
.toc-sidebar-scroll {
  scrollbar-width: thin;
  scrollbar-color: color-mix(in srgb, var(--color-muted-foreground) 30%, transparent) transparent;
}

.toc-sidebar-scroll::-webkit-scrollbar {
  width: 6px;
}

.toc-sidebar-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.toc-sidebar-scroll::-webkit-scrollbar-thumb {
  background-color: color-mix(in srgb, var(--color-muted-foreground) 30%, transparent);
  border-radius: 3px;
}

.toc-sidebar-scroll::-webkit-scrollbar-thumb:hover {
  background-color: color-mix(in srgb, var(--color-muted-foreground) 50%, transparent);
}

/* 侧边栏动画 */
.toc-sidebar {
  animation: toc-sidebar-fade-in 0.3s ease-out;
}

@keyframes toc-sidebar-fade-in {
  from {
    opacity: 0;
    transform: translateX(-10px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.toc-sidebar.order-last {
  animation-name: toc-sidebar-fade-in-right;
}

@keyframes toc-sidebar-fade-in-right {
  from {
    opacity: 0;
    transform: translateX(10px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

#toc-content a {
  @apply text-muted-foreground hover:text-primary hover:bg-primary/10 relative block rounded-lg border-l-2 border-transparent px-4 py-3 no-underline transition-all duration-200 ease-out hover:translate-x-0.5 hover:-translate-y-px hover:scale-[1.02];
}

/* Gumshoe 添加的 active 类样式 */
#toc-content a.active,
#toc-content li.active > a {
  @apply text-primary bg-primary/10 translate-x-0.5 -translate-y-px scale-[1.02] font-medium;
}

#toc-content ul ul a {
  @apply pl-6;
}

#toc-content ul ul ul a {
  @apply pl-8;
}

#toc-content ul ul ul ul a {
  @apply pl-10;
}

#toc-content ul ul ul ul ul a {
  @apply pl-12;
}

#toc-content ul ul ul ul ul ul a {
  @apply pl-14;
}

/* Justified Gallery 样式 */
.fj-gallery .glightbox {
  @apply no-underline hover:no-underline focus:no-underline block overflow-hidden;
  border-radius: 0.5rem;
}

.fj-gallery-item {
  @apply overflow-hidden;
  border-radius: 0.5rem;
}

.fj-gallery img {
  @apply transition-transform duration-300 ease-in-out;
  border-radius: 0.5rem;
}

.fj-gallery img:hover {
  @apply scale-105;
}

.single-image .glightbox {
  @apply no-underline hover:no-underline focus:no-underline inline-block overflow-hidden;
  border-radius: 0.5rem;
}
.single-image .image-container {
  @apply overflow-hidden;
  border-radius: 0.5rem;
}

.single-image img {
  @apply transition-transform duration-300 ease-in-out;
  border-radius: 0.5rem;
}

.single-image img:hover {
  @apply scale-105;
}

.fj-gallery-item,
.single-image .image-container {
  position: relative;
}


.link-card {
  @apply bg-card border border-border rounded-lg mb-2 p-4 transition-all duration-200 hover:scale-105;
  flex: 1 1 calc(33.333% - 1rem);
}
.link-card-title {
  @apply text-foreground font-semibold m-0 p-0 text-sm hover:text-primary transition-colors truncate;
}
.link-card-content {
  @apply text-muted-foreground m-0 p-0 text-xs mt-1 leading-relaxed line-clamp-2;
}
.link-card-url {
  @apply text-muted-foreground m-0 p-0 text-xs mt-1 font-mono opacity-70 truncate;
}
.link-card-arrow {
  @apply flex-shrink-0 text-muted-foreground group-hover:text-primary transition-colors;
}
.link-card a::before {
  display: none;
}
.link-card a::after {
  display: none;
}
.link-card-group {
  @apply flex flex-wrap gap-4 w-full;
  justify-content: flex-start;
  align-items: stretch;
}

.link-card-group .link-card:only-child {
  flex: 0 0 auto;
  @apply max-w-md w-full mx-auto;
}
.link-card-error {
  @apply bg-muted/10 border border-muted/20 rounded-lg p-4 text-muted;
  @apply w-full max-w-md mx-auto; 
}
.link-card-error p {
  @apply mb-2 last:mb-0;
}
.link-card-error ul {
  @apply list-disc list-inside space-y-1 text-sm;
}
